<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mestre dos N√∫meros & Tutor IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #fdfdfd;
        }

        .ai-chat-bubble {
            border-radius: 20px 20px 20px 4px;
        }

        .user-chat-bubble {
            border-radius: 20px 20px 4px 20px;
        }

        .animate-pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }

        .tab-btn.active {
            background-color: #4f46e5;
            color: white;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }
    </style>
</head>
<body class="text-slate-900">

    <!-- Navega√ß√£o Superior -->
    <nav class="bg-white/80 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-xl">‚àë</div>
                <h1 class="text-xl font-extrabold tracking-tight">Math<span class="text-indigo-600">AI</span></h1>
            </div>
            <div class="bg-slate-100 p-1.5 rounded-2xl flex gap-1">
                <button onclick="showSection('aprender')" id="tab-aprender" class="tab-btn active px-5 py-2 rounded-xl text-sm font-bold transition-all">Aprender</button>
                <button onclick="showSection('treinar')" id="tab-treinar" class="tab-btn px-5 py-2 rounded-xl text-sm font-bold transition-all">Desafios</button>
                <button onclick="showSection('ia')" id="tab-ia" class="tab-btn px-5 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-2">
                    <span class="w-2 h-2 bg-indigo-400 rounded-full animate-pulse"></span> Tutor IA
                </button>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto px-6 py-12">

        <!-- SE√á√ÉO: APRENDER -->
        <div id="sec-aprender" class="space-y-12">
            <div class="max-w-2xl">
                <h2 class="text-4xl font-extrabold mb-4">A Jornada dos N√∫meros</h2>
                <p class="text-slate-500 text-lg">Entenda como a matem√°tica evoluiu para resolver problemas cada vez mais complexos.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Cards de Conjuntos -->
                <div onclick="showFact('N')" class="p-6 bg-white border border-slate-200 rounded-3xl hover:border-indigo-500 cursor-pointer transition-all hover:shadow-lg">
                    <span class="text-indigo-600 font-bold text-2xl">‚Ñï</span>
                    <h3 class="font-bold mt-2">Naturais</h3>
                    <p class="text-sm text-slate-500 mt-2">A origem. Contagem de objetos inteiros e positivos.</p>
                </div>
                <div onclick="showFact('Z')" class="p-6 bg-white border border-slate-200 rounded-3xl hover:border-indigo-500 cursor-pointer transition-all hover:shadow-lg">
                    <span class="text-indigo-600 font-bold text-2xl">‚Ñ§</span>
                    <h3 class="font-bold mt-2">Inteiros</h3>
                    <p class="text-sm text-slate-500 mt-2">D√≠vidas e temperaturas. Adiciona os negativos ao ‚Ñï.</p>
                </div>
                <div onclick="showFact('Q')" class="p-6 bg-white border border-slate-200 rounded-3xl hover:border-indigo-500 cursor-pointer transition-all hover:shadow-lg">
                    <span class="text-indigo-600 font-bold text-2xl">‚Ñö</span>
                    <h3 class="font-bold mt-2">Racionais</h3>
                    <p class="text-sm text-slate-500 mt-2">Partes de um todo. Tudo que vira fra√ß√£o.</p>
                </div>
                <div onclick="showFact('I')" class="p-6 bg-white border border-slate-200 rounded-3xl hover:border-indigo-500 cursor-pointer transition-all hover:shadow-lg">
                    <span class="text-indigo-600 font-bold text-2xl">ùïÄ</span>
                    <h3 class="font-bold mt-2">Irracionais</h3>
                    <p class="text-sm text-slate-500 mt-2">O caos infinito. Decimais que nunca se repetem.</p>
                </div>
                <div onclick="showFact('R')" class="p-6 bg-white border border-slate-200 rounded-3xl hover:border-indigo-500 cursor-pointer transition-all hover:shadow-lg">
                    <span class="text-indigo-600 font-bold text-2xl">‚Ñù</span>
                    <h3 class="font-bold mt-2">Reais</h3>
                    <p class="text-sm text-slate-500 mt-2">A linha completa. Uni√£o de ‚Ñö e ùïÄ.</p>
                </div>
                <div onclick="showFact('C')" class="p-6 bg-white border border-slate-200 rounded-3xl hover:border-indigo-500 cursor-pointer transition-all hover:shadow-lg">
                    <span class="text-indigo-600 font-bold text-2xl">‚ÑÇ</span>
                    <h3 class="font-bold mt-2">Complexos</h3>
                    <p class="text-sm text-slate-500 mt-2">O plano 2D. Resolve ra√≠zes negativas com i.</p>
                </div>
            </div>

            <!-- Modal Simples de Info -->
            <div id="info-display" class="bg-indigo-50 p-8 rounded-[2rem] border border-indigo-100 hidden animate-fadeIn">
                <h4 id="info-title" class="text-2xl font-bold text-indigo-900 mb-2"></h4>
                <p id="info-body" class="text-indigo-800 leading-relaxed"></p>
            </div>
        </div>

        <!-- SE√á√ÉO: DESAFIOS (QUIZ) -->
        <div id="sec-treinar" class="hidden space-y-8">
            <div class="flex justify-between items-end">
                <h2 class="text-3xl font-extrabold">Teste de N√≠vel</h2>
                <button onclick="newQuestion()" class="bg-indigo-600 text-white px-6 py-3 rounded-2xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200">Pr√≥xima Pergunta</button>
            </div>

            <div id="quiz-container" class="bg-white p-10 rounded-[2.5rem] border border-slate-200 shadow-sm min-h-[400px] flex flex-col justify-center">
                <div id="q-category" class="text-xs font-bold uppercase tracking-widest text-indigo-500 mb-4">Carregando...</div>
                <h3 id="q-text" class="text-2xl font-bold mb-8 leading-tight"></h3>
                <div id="q-options" class="grid grid-cols-1 gap-4"></div>
                <div id="q-feedback" class="mt-8 p-6 rounded-2xl hidden font-semibold"></div>
            </div>
        </div>

        <!-- SE√á√ÉO: IA TUTOR -->
        <div id="sec-ia" class="hidden h-[600px] flex flex-col bg-white rounded-[2.5rem] border border-slate-200 shadow-2xl overflow-hidden">
            <div class="p-6 border-b border-slate-100 bg-slate-50 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    <span class="font-bold">Tutor IA Online</span>
                </div>
                <span class="text-xs text-slate-400">Especialista em Conjuntos Num√©ricos</span>
            </div>
            
            <div id="chat-history" class="flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50/30">
                <div class="ai-chat-bubble bg-indigo-600 text-white p-4 max-w-[80%] text-sm self-start">
                    Ol√°! Sou o seu tutor de matem√°tica. Pode me perguntar qualquer coisa sobre conjuntos num√©ricos (N, Z, Q, I, R, C) ou pedir para eu explicar um conceito dif√≠cil!
                </div>
            </div>

            <div class="p-4 border-t border-slate-100 flex gap-2 bg-white">
                <input type="text" id="ai-input" placeholder="Pergunte sobre ra√≠zes de -1 ou n√∫meros irracionais..." 
                       class="flex-1 bg-slate-100 border-none rounded-2xl px-6 py-4 outline-none focus:ring-2 ring-indigo-500 transition-all">
                <button onclick="askAI()" id="send-btn" class="bg-indigo-600 text-white p-4 rounded-2xl hover:bg-indigo-700 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </button>
            </div>
        </div>

    </main>

    <script>
        // --- LOGICA DE NAVEGA√á√ÉO ---
        function showSection(id) {
            ['aprender', 'treinar', 'ia'].forEach(s => {
                document.getElementById(`sec-${s}`).classList.add('hidden');
                document.getElementById(`tab-${s}`).classList.remove('active');
            });
            document.getElementById(`sec-${id}`).classList.remove('hidden');
            document.getElementById(`tab-${id}`).classList.add('active');
            
            if (id === 'treinar') newQuestion();
        }

        // --- APRENDER: FATOS ---
        const facts = {
            'N': { t: "Naturais (‚Ñï)", b: "Tudo come√ßou com a necessidade de contar ovelhas ou pedras. O conjunto ‚Ñï {0, 1, 2...} √© o alicerce. Curiosidade: Alguns matem√°ticos n√£o incluem o zero aqui, chamando-o de N*." },
            'Z': { t: "Inteiros (‚Ñ§)", b: "Vem do alem√£o 'Zahlen' (n√∫meros). Surgiu quando precisamos representar d√≠vidas ou temperaturas abaixo de zero. Ele abra√ßa todos os Naturais e seus 'espelhos' negativos." },
            'Q': { t: "Racionais (‚Ñö)", b: "Vem de 'Quociente'. Se voc√™ pode escrever um n√∫mero como fra√ß√£o (ex: 1/2 ou 0.333...), ele √© Racional. Ele preenche os buracos entre os inteiros." },
            'I': { t: "Irracionais (ùïÄ)", b: "N√∫meros que 'enlouqueceram'. Eles t√™m infinitas casas decimais sem nenhum padr√£o. Se voc√™ tentar escrever o Pi (œÄ) ou a ‚àö2 como fra√ß√£o, falhar√° miseravelmente." },
            'R': { t: "Reais (‚Ñù)", b: "√â a uni√£o total de quem √© racional e quem n√£o √©. Imagine uma linha infinita e sem buracos: cada ponto nessa linha √© um n√∫mero Real." },
            'C': { t: "Complexos (‚ÑÇ)", b: "Onde a m√°gica acontece. Nos Complexos, aceitamos que i¬≤ = -1. Isso cria uma nova dimens√£o (eixo imagin√°rio), permitindo resolver qualquer equa√ß√£o quadr√°tica." }
        };

        function showFact(key) {
            const display = document.getElementById('info-display');
            document.getElementById('info-title').innerText = facts[key].t;
            document.getElementById('info-body').innerText = facts[key].b;
            display.classList.remove('hidden');
        }

        // --- QUIZ PERSONALIZADO (MELHORADO) ---
        const questions = [
            { cat: "L√≥gica de Inclus√£o", q: "√â correto afirmar que todo n√∫mero natural (‚Ñï) √© um n√∫mero inteiro (‚Ñ§)?", o: ["Sim, sempre", "N√£o, apenas se for positivo", "N√£o, s√£o conjuntos diferentes"], a: 0, f: "O conjunto ‚Ñï est√° totalmente contido em ‚Ñ§. Pense no ‚Ñ§ como uma caixa maior." },
            { cat: "Irracionais", q: "O n√∫mero 0,121212... (uma d√≠zima peri√≥dica) pertence a qual conjunto?", o: ["Irracionais (ùïÄ)", "Racionais (‚Ñö)", "Apenas aos Reais"], a: 1, f: "D√≠zimas peri√≥dicas podem ser escritas como fra√ß√£o (ex: 12/99), por isso s√£o Racionais." },
            { cat: "Complexos", q: "Qual o resultado de i¬≤ (unidade imagin√°ria ao quadrado) no conjunto dos Complexos?", o: ["N√£o existe", "1", "-1"], a: 2, f: "Por defini√ß√£o, i = ‚àö-1, portanto i¬≤ = -1. Isso resolve o problema das ra√≠zes negativas." },
            { cat: "An√°lise Real", q: "A raiz quadrada de 2 (‚àö2) pode ser representada como uma fra√ß√£o exata?", o: ["Sim, √© 1.41/1", "N√£o, √© um n√∫mero irracional", "Sim, se usarmos d√≠zimas"], a: 1, f: "A ‚àö2 √© um dos exemplos mais cl√°ssicos de n√∫meros Irracionais (ùïÄ)." },
            { cat: "Conjuntos", q: "Qual destes n√∫meros pertence simultaneamente a ‚Ñ§ e ‚Ñö, mas N√ÉO a ‚Ñï?", o: ["5", "0.5", "-3"], a: 2, f: "-3 √© inteiro e racional (pode ser -3/1), mas n√£o √© natural porque √© negativo." }
        ];

        let currentQ = {};

        function newQuestion() {
            const q = questions[Math.floor(Math.random() * questions.length)];
            currentQ = q;
            document.getElementById('q-category').innerText = q.cat;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('q-feedback').classList.add('hidden');
            
            const optionsBox = document.getElementById('q-options');
            optionsBox.innerHTML = '';
            
            q.o.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = "p-5 border-2 border-slate-100 rounded-2xl hover:border-indigo-400 hover:bg-indigo-50 text-left font-medium transition-all";
                b.innerText = opt;
                b.onclick = () => checkAnswer(i);
                optionsBox.appendChild(b);
            });
        }

        function checkAnswer(i) {
            const fb = document.getElementById('q-feedback');
            fb.classList.remove('hidden');
            if(i === currentQ.a) {
                fb.className = "mt-8 p-6 rounded-2xl bg-green-50 text-green-700 border border-green-100 block font-semibold";
                fb.innerText = "‚úì Correto! " + currentQ.f;
            } else {
                fb.className = "mt-8 p-6 rounded-2xl bg-rose-50 text-rose-700 border border-rose-100 block font-semibold";
                fb.innerText = "‚úó Ops! A resposta correta era: " + currentQ.o[currentQ.a] + ". " + currentQ.f;
            }
        }

        // --- TUTOR IA (INTEGRA√á√ÉO GEMINI) ---
        const apiKey = ""; // Chave injetada pelo ambiente

        async function askAI() {
            const inputEl = document.getElementById('ai-input');
            const chatBox = document.getElementById('chat-history');
            const btn = document.getElementById('send-btn');
            const query = inputEl.value.trim();
            
            if (!query) return;

            // Interface
            appendMessage('user', query);
            inputEl.value = '';
            btn.disabled = true;
            const loadingMsg = appendMessage('ai', 'Pensando...', true);

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: query }] }],
                        systemInstruction: { parts: [{ text: "Voc√™ √© um tutor de matem√°tica especializado em conjuntos num√©ricos (Naturais, Inteiros, Racionais, Irracionais, Reais e Complexos). Explique de forma clara, did√°tica e descontra√≠da. Use LaTeX para f√≥rmulas se necess√°rio." }] }
                    })
                });

                const data = await response.json();
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text || "Desculpe, tive um problema ao processar sua d√∫vida.";
                
                loadingMsg.remove();
                appendMessage('ai', text);
            } catch (err) {
                loadingMsg.innerText = "Erro ao conectar com o servidor. Verifique sua conex√£o.";
                console.error(err);
            } finally {
                btn.disabled = false;
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        }

        function appendMessage(role, text, isLoading = false) {
            const chatBox = document.getElementById('chat-history');
            const div = document.createElement('div');
            const isAi = role === 'ai';
            div.className = `${isAi ? 'ai-chat-bubble bg-indigo-600 text-white self-start' : 'user-chat-bubble bg-slate-200 text-slate-800 self-end'} p-4 max-w-[85%] text-sm ${isLoading ? 'animate-pulse-slow' : ''}`;
            div.innerText = text;
            
            const wrapper = document.createElement('div');
            wrapper.className = `flex ${isAi ? 'justify-start' : 'justify-end'}`;
            wrapper.appendChild(div);
            
            chatBox.appendChild(wrapper);
            chatBox.scrollTop = chatBox.scrollHeight;
            return div;
        }

        // Enter no input da IA
        document.getElementById('ai-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') askAI();
        });
    </script>
</body>
</html>